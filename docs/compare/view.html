<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="keywords" content="穿帮，明星">
    <meta name="description" content="发现时尚与潮流，揭穿明星的秘密！">
    <meta property="qc:admins" content="170621741430516216763757" />
    <title>穿帮v0.1 - Home</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="../styles/noookey.css">
    <link rel="stylesheet" href="../styles/cb.css">
    <link rel="stylesheet" href="../styles/index.css">
</head>
<body>
    <!-- The main nav -->
    <nav class="main-nav">
        <ul>
            <li>
                <a href="../index.html" class="transition">首页</a>
                <a href="../index.html" class="icon-home m-nav-icon transition"></a>
            </li>
            <li>
                <a href="../celebrity/index.html" class="transition">名人</a>
                <a href="../celebrity/index.html" class="icon-star m-nav-icon transition"></a>
            </li>
            <li>
                <a href="../brand/index.html" class="transition">品牌</a>
                <a href="../brand/index.html" class="icon-brand m-nav-icon transition"></a>
            </li>
            <li>
                <a href="../topic/index.html" class="transition">话题</a>
                <a href="../topic/index.html" class="icon-topic m-nav-icon transition"></a>
            </li>
            <li class="active">
                <a href="#" class="transition">对比</a>
                <a href="#" class="icon-compare-1 m-nav-icon transition"></a>
            </li>
            <li>
                <a href="../question/index.html" class="transition">待答</a>
                <a href="../question/index.html" class="icon-wait m-nav-icon transition"></a>
            </li>
            <li>
                <a href="../user/index.html" class="transition">用户</a>
                <a href="../user/index.html" class="icon-user-1 m-nav-icon transition"></a>
            </li>
        </ul>
        <div class="download-app">
            <i class="icon-phone"></i>
        </div>
    </nav>
    <!-- The top bar -->
    <header class="header">
        <a href="/">
            <div class="logo">
                <i class="icon-black-star"></i>
            </div>
        </a>
        <div id="search_box">
            <i class="icon-zoom"></i>
            <input type="text" id="keywords" name="keywords" autocomplete="off" placeholder="搜索&nbsp;品牌/明星/话题..." value="" required="required" data-focus="false">
            <div class="search-result">
            </div>
        </div>
        <a href="../question/ask.html" class="add-star-outfit transition login-no">
            <i class="icon-plus"></i>
            添加明星穿搭
        </a>
    </header>

    <!-- START: content -->
    <!-- The sub nav -->
    <div class="sub-nav-wrap">
        <div class="sub-nav">
            <nav class="items compare-sub">
                <h1>趋势</h1>
                <ul class="wheel-panel">

                    <li class="transition"><a href="#">
                        <div class="image c-scale">
                            <div class="slide-wrap">
                                
                                <img src="../images/hot1.jpg" alt="">
                                <img src="../images/hot3.jpg" alt="">

                            </div>
                            <span class="vs transition">VS</span>
                        </div>
                        <p class="title">王一博和蔡徐坤</p>
                        <p class="comment">12评论</p>
                    </a></li>

                </ul>
            </nav>
        </div>
    </div>
    <!-- The compare content (slider) -->
    <section class="content" id="compare_detail">
        <div class="cd-one">
            <h1 class="title" id="compare_id" data-id="1">
                <span class="vs">VS</span>
                香奈儿叫小姐姐
            </h1>
            <div class="profile">
                <div class="img-wrap">
                    <img src="../images/avatar1.jpg" alt="avatar">
                </div>
                <span class="name">小明</span>
                <span class="date">2017-09-13 创建</span>
            </div>
            <!-- two status transform -->
            <div class="slide-wrap show-mode1">
                <ul class="slide-panel translate3D">
                    
                    <li class="active">
                        <img src="../images/hot1.jpg" alt="">

                        <p class="star">大乔</p>
                        <p class="clothes">
                            <i class="icon-in"></i>
                            爱马仕 上衣
                        </p>

                    </li>

                    <li class="active">
                        <img src="../images/hot2.jpg" alt="">

                        <p class="star">昭君</p>
                        <p class="clothes">
                            <i class="icon-in"></i>
                            迪奥 裤子
                        </p>

                    </li>

                    <li class="active">
                        <img src="../images/hot3.jpg" alt="">

                        <p class="star">小明</p>
                        <p class="clothes">
                            <i class="icon-in"></i>
                            LV 裙子
                        </p>

                    </li>

                </ul>
                <div class="arrow left transition">
                    <i class="icon-dir-left"></i>
                </div>
                <div class="arrow right transition">
                    <i class="icon-dir-right"></i>
                </div>
            </div>
            <div class="thr-col-wrap grid three clearfix show-mode2">
                <div class="column one">
                   
                        <a href="javascript:;" class="img-wrap">
                            <img src="../images/hot4.jpg" alt="">

                            <div class="title">
                                <em>杨幂穿 爱马仕 裙子</em>
                            </div>

                        </a>

                </div>
            </div>
            <!--  -->
            <div class="slide-ctrl">
                <span class="collect no">
                    <i class="icon-collect-1"></i>
                    收藏
                    <span class="num">1212</span>
                </span>


                <span class="zan yes">
                    <i class="icon-zan-2"></i>

                    赞
                    <span class="num">3333</span>
                </span>
                <span class="share">
                    <script>
                    (function(){
                        var p = {
                            url: 'http://3w.chuanbang.com',    // 要分享的网址
                            appkey: '',
                            title: '穿帮，你的选择',     // 分享的标题       
                            pic: '',   // 分享的缩略图
                            ralateUid: '3197845034',    // 分享后需要 @ 的 ID
                            searchPic: true,            // 是否开启抓图
                            language: 'zh_cn'
                        }
                        var s = [];
                        for(var i in p){
                            s.push(i + '=' + encodeURIComponent(p[i]||''));
                        }
                        document.write(['<a href="http://service.weibo.com/share/share.php?', s.join('&'), '" target="_blank"><i class="icon-share-1"></i></a>'].join(''));
                    }());
                    </script>
                    分享
                </span>
                
                <span class="total-imgs">
                    共216图
                </span>
                <span class="mode2">
                    列表浏览
                    <i class="icon-slide-2"></i>
                </span>
                <span class="mode1">
                    翻页浏览
                    <i class="icon-slide-1"></i>
                </span>
            </div>
            <ul class="comment-box clearfix">
                
                    <li>
                        <div class="ava-wrap">
                            <img src="../images/avatar1.jpg" alt="">
                        </div>
                        <p class="m-data">
                            <span class="name">疯狂的石头</span>
                            <span class="time">2015-01-12</span>
                        </p>
                        <p class="desc">
                            假如你现在想看一部日本电影，又觉得大师们的片子太厚重，不易接近，新电影又拿不准看个啥能轻松娱乐赏心悦目又不失逼格，那么电影红花会就给你指条明路:《小森林夏秋篇》！就是一部不看不知道，一看真奇妙的佳片，去年全世界最好看的电影之一，不信？看完无感您回来插了战台烽！
                        </p>
                    </li>

                <div class="more">
                    <span class="more-btn">更多评论（全部333条）</span>
                </div>

                <div class="input">
                    <div class="ava-wrap">
                            <img src="../images/brand/avatar1.jpg" alt="">
                    </div>
                    <textarea name="content" id="comment-text"></textarea>
                    <div class="input-btn">
                        提 交
                    </div>
                </div>
            </ul>
        </div>
    </section>
    <script>
        function invokeHere(){
            $(window).on('resize', function(event) {
                $('.compare-sub').find('.image').find('img').each(function(index, el) {
                    var init_w = $('.compare-sub').find('.image').width() / 2;
                    $(this).css('width', init_w + 'px');
                });
            }).trigger('resize');
            // set slide's clothes width equal img
            $('.slide-panel').find('img').load(function() {
                var _me = $(this),
                    _w = _me.width();

                _me.siblings('.clothes').css('width', _w);
            });

            // favorite & zan event
            $('.slide-ctrl').find('.collect').click(function(event) {
                var _me = $(this);
                    num = parseInt(_me.find('.num').text());
                    id = $('#compare_id').attr('data-id'),
                    ajaxing = false;

                if(_me.hasClass('yes') && !ajaxing){
                    $.ajax({
                        url: '/compare/unfollow',
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            id: id
                        },
                        success: function(data, status, xhr){
                            if(data.msg === 'success'){
                                _me.toggleClass('yes no');
                                _me.find('i').attr('class', 'icon-collect-1');
                                _me.find('.num').text(--num);
                            }else{
                                // Fail to unfollow
                            }
                        },
                        error: function(xhr, status, msg){

                        },
                        complete: function(xhr, status){
                            ajaxing = true;
                        }
                    });
                }else if(_me.hasClass('no') && !ajaxing){
                    $.ajax({
                        url: '/compare/follow',
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            id: id
                        },
                        success: function(data, status, xhr){
                            if(data.msg === 'success'){
                                _me.toggleClass('yes no');
                                _me.find('i').attr('class', 'icon-collect-2');
                                _me.find('.num').text(++num);
                            }else{
                                // Fail to follow
                            }
                        },
                        error: function(xhr, status, msg){

                        },
                        complete: function(xhr, status){
                            ajaxing = true;
                        }
                    });
                }
            });
            $('.slide-ctrl').find('.zan').click(function(event) {
                var _me = $(this);
                    num = parseInt(_me.find('.num').text());
                    id = $('#compare_id').attr('data-id'),
                    ajaxing = false;

                if(_me.hasClass('yes') && !ajaxing){
                    $.ajax({
                        url: '/compare/unsupport',
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            id: id
                        },
                        success: function(data, status, xhr){
                            if(data.msg === 'success'){
                                _me.toggleClass('yes no');
                                _me.find('i').attr('class', 'icon-zan-1');
                                _me.find('.num').text(--num);
                            }else{
                                // Fail to unfollow
                            }
                        },
                        error: function(xhr, status, msg){

                        },
                        complete: function(xhr, status){
                            ajaxing = true;
                        }
                    });
                }else if(_me.hasClass('no') && !ajaxing){
                    $.ajax({
                        url: '/compare/support',
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            id: id
                        },
                        success: function(data, status, xhr){
                            if(data.msg === 'success'){
                                _me.toggleClass('yes no');
                                _me.find('i').attr('class', 'icon-zan-2');
                                _me.find('.num').text(++num);
                            }else{
                                // Fail to follow
                            }
                        },
                        error: function(xhr, status, msg){

                        },
                        complete: function(xhr, status){
                            ajaxing = true;
                        }
                    });
                }
            });

            // speed slider
            var com_detail_opt = {
                'wrap': $('#compare_detail').find('.slide-wrap'),
                'panel': $('#compare_detail').find('.slide-panel'),
                'time': 300
            }
            function SpeedSlider(opt){
                this.wrap = opt.wrap;
                this.panel = opt.panel;
                this.wrap_w = opt.wrap.width();
                this.panel_real_w = (function(){
                    var num = 0;
                    opt.panel.children('li').each(function(index, el) {
                        num += $(this).width() + 10;
                    });
                    return num - 10;
                }());
                this.enable_slide_w = this.panel_real_w - this.wrap_w;
                this.already_slide_w = 0;
                this.ing = false;
                this.time = opt.time;
            }
            SpeedSlider.prototype.start = function(){
                this.arrowShowHide();
            };
            SpeedSlider.prototype.arrowShowHide = function(){
                if(this.panel_real_w < this.wrap.width()){
                    this.wrap.find('.arrow').css('display', 'none');
                }else{
                    this.wrap.find('.arrow').css('display', 'block');
                }
            };
            SpeedSlider.prototype.resetEnableSlideWidth = function(){
                this.enable_slide_w = this.panel_real_w - this.wrap.width();
            };
            SpeedSlider.prototype.getActive = function(){
                return this.panel.find('.active');
            }
            SpeedSlider.prototype.slideLeft = function(){
                var _this = this;
                if(this.enable_slide_w > 0){
                    this.ing = true;
                    var slide_w = this.getActive().width() + 10;
                    if(slide_w > this.enable_slide_w){
                        slide_w = this.enable_slide_w;
                        this.getActive().removeClass('active');
                        this.panel.find('li').last().addClass('active');
                    }else{
                        this.getActive().next().length !== 0
                        ? this.getActive().removeClass('active').next().addClass('active')
                        : void(0);
                    }
                    this.panel.animate({
                        'left': '-=' + slide_w
                    },
                        _this.time, function() {
                        _this.enable_slide_w -= slide_w;
                        _this.already_slide_w += slide_w;
                        console.log('enable_slide_w '+_this.enable_slide_w);
                        console.log('already_slide_w '+_this.already_slide_w);
                        _this.ing = false;
                    });
                }
            };
            SpeedSlider.prototype.slideRight = function(){
                var _this = this;
                if(this.already_slide_w > 0){
                    this.ing = true;
                    var slide_w = this.getActive().width() + 10;
                    if(slide_w > this.already_slide_w){
                        slide_w = this.already_slide_w;
                        this.getActive().removeClass('active');
                        this.panel.find('li').first().addClass('active');
                    }else{
                        this.getActive().prev().length !== 0
                        ? this.getActive().removeClass('active').prev().addClass('active')
                        : void(0);
                    }
                    this.panel.animate({
                        'left': '+=' + slide_w
                    },
                        _this.time, function() {
                        _this.enable_slide_w += slide_w;
                        _this.already_slide_w -= slide_w;
                        console.log('enable_slide_w '+_this.enable_slide_w);
                        console.log('already_slide_w '+_this.already_slide_w);
                        _this.ing = false;
                    });
                }
            };

            var speed_slider;
            $(window).on('load', function(event) {
                speed_slider = new SpeedSlider(com_detail_opt);
                speed_slider.start();
                console.log(speed_slider.enable_slide_w);
            });
            $(window).on('resize', function(event) {
                speed_slider.resetEnableSlideWidth();
                speed_slider.arrowShowHide();
                console.log(speed_slider.enable_slide_w);
            });
            $('.slide-wrap').find('.right').on('click', function(event) {
                if(!speed_slider.ing){
                    speed_slider.slideLeft();
                }
            });
            $('.slide-wrap').find('.left').on('click', function(event) {
                if(!speed_slider.ing){
                    speed_slider.slideRight();
                }
            });      // END speed slider

            // switch slide mode
            $('.mode1').on('click', 'i', function(event) {
                $('.show-mode1').css('display', 'block');
                $('.show-mode2').css('display', 'none');
            });
            $('.mode2').on('click', 'i', function(event) {
                $('.show-mode1').css('display', 'none');
                $('.show-mode2').css('display', 'block');
            });
            $('.thr-col-wrap').find('img').hover(function() {
                var _me = $(this);
                $(this).next().stop().animate({'bottom': 0}, 300);
            }, function() {
                var _me = $(this);
                $(this).next().stop().animate({'bottom': '-75px'}, 300);
            });
        }

        $(function(){
            // 图片切换按钮的动画
            function resetThumbBtn(ele_h, time){
                if(!time) time = 500;
                $('#compare_sub').find('.btn-ctrl').css({'height': ele_h + 'px'});
            }
            // Thumbnail  animate
            var $pp = $('.photo-panel'),      // thumbnail amount
                $pp_items = $pp.children(),
                max_index,
                now_index,
                imgs = $pp.find('img'),
                movie_end = true;
            // 重置控制按钮
            $pp.find('.on').find('img').load(function() {
                console.log($pp.find('.on').innerHeight());
                $('#compare_sub').find('.btn-ctrl').css('height', $pp.find('.on').innerHeight() + 'px');
            });
            // imgs.eq(now_index).css('opacity', 1);
            function slideToTop($ele, time){
                if(!time) time = 500;
                var _on = $pp.find('.on'), _next = _on.next();
                now_index = _on.index();

                if(_next.length !== 0){
                    movie_end = false;
                    _on.css('opacity', '.5');
                    _next.animate({'opacity': 1}, time - 100);
                    $ele.animate({
                            'top': '-=' + _on.innerHeight()
                        },
                        time + 50, function() {
                            _on.removeClass('on');
                            _next.addClass('on');
                            movie_end = true;
                    });
                    // 控制按钮的动画
                    resetThumbBtn(_next.innerHeight());
                    // 轮播主图
                    jumpTo($slide_items, 500, now_index + 1);
                }
            }
            function slideToDown($ele, time){
                if(!time) time = 500;
                var _on = $pp.find('.on'), _next = _on.prev();
                now_index = _on.index();

                if(_next.length !== 0){
                    movie_end = false;
                    _on.css('opacity', '.5');
                    _next.animate({'opacity': 1}, time - 100);
                    $ele.animate({
                            'top': '+=' + _next.innerHeight()
                        },
                        time + 50, function() {
                            _on.removeClass('on');
                            _next.addClass('on');
                            movie_end = true;
                    });
                    // 控制按钮的动画
                    resetThumbBtn(_next.innerHeight());
                    // 轮播主图
                    jumpTo($slide_items, 500, now_index - 1);
                }
            }
            // 通用 Fade 图片轮播
            var $slide_items = $('#co_slider_box').children(),
                current = 0,
                next_one = current + 1,
                max_index = $slide_items.length - 1;
            function jumpTo(eles, time, to_next){
                if(!time) time = 500;
                movie_end = false;
                // $(eles[current]).css({'z-index': 3, 'display': 'block'});
                $(eles[to_next]).css({'z-index': 2, 'display': 'block'});
                $(eles[current]).animate({
                        opacity: 0
                    },
                    time, function() {
                        $(this)
                            .removeClass('s-on')
                            .css({
                                'z-index': 1,
                                opacity: 1,
                                'display': 'none'
                            });
                        // $(this).removeClass('s-on');

                        current = to_next;
                        if (current < 0){ current = max_index; }
                        next_one = current + 1;
                        if(next_one > max_index){ next_one = 0; }
                        $(eles[current]).addClass('s-on');
                        movie_end = true;
                    }
                );
            }
            // 轮播按钮控制
            $('.top').click(function(event) {
                if(movie_end){
                    slideToDown($pp, 500);
                }
            });
            $('.down').click(function(event) {
                if(movie_end){
                    slideToTop($pp, 500);
                }
            });
        });
    </script>
    <!-- END: content -->

    <!-- To top -->
    <div class="to-top link">
        <i class="icon-dir-up"></i>
    </div>

    <script src="../scripts/jquery.js"></script>
    <script src="../scripts/jquery.easing.1.3.js"></script>
    <script src="../scripts/cb.js"></script>
</body>
</html>